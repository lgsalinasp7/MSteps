(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{16026:(e,a,r)=>{Promise.resolve().then(r.bind(r,24862))},24862:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>h,dynamic:()=>m});var t=r(95155),s=r(12115),n=r(35844),i=r(71847);let o=(0,i.A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),l=(0,i.A)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var d=r(15239);function u(e){let{onLoginSuccess:a}=e,{login:r}=(0,n.A)(),[i,u]=(0,s.useState)(""),[c,m]=(0,s.useState)(""),[h,p]=(0,s.useState)(!1),[g,x]=(0,s.useState)("admin"),[f,b]=(0,s.useState)(null);async function v(e){if(e.preventDefault(),e.stopPropagation(),!i.trim())return void b("Por favor ingresa tu usuario");if(!c.trim())return void b("Por favor ingresa tu contrase\xf1a");if(!h){b(null),p(!0);try{await r({username:i.trim(),password:c.trim(),preferredRole:g}),null==a||a()}catch(e){b(e.message||"Error al iniciar sesi\xf3n")}finally{p(!1)}}}return(0,t.jsxs)("div",{className:"min-h-screen w-full text-white flex items-center justify-center px-4 relative overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute inset-0 -z-10",children:(0,t.jsx)(d.default,{src:"/fondo-login.png",alt:"Fondo login",fill:!0,priority:!0,className:"object-cover"})}),(0,t.jsxs)("div",{className:"w-full max-w-lg relative z-10",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-white rounded-2xl shadow-2xl mb-4",children:(0,t.jsx)(d.default,{src:"/logo.png",alt:"Mastersteps Logo",width:64,height:64,className:"object-contain"})}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Mastersteps"}),(0,t.jsx)("p",{className:"text-blue-100 text-lg",children:"Plataforma de Gesti\xf3n Educativa"})]}),(0,t.jsx)("div",{className:"rounded-2xl bg-white/95 backdrop-blur-sm shadow-2xl border border-white/20 overflow-hidden relative z-20",children:(0,t.jsxs)("div",{className:"p-8",children:[(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Selecciona tu Rol"}),(0,t.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,t.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),x("admin")},className:"px-4 py-2 text-sm rounded-lg font-medium transition-all duration-200 ".concat("admin"===g?"bg-blue-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"\uD83D\uDC51 Admin"}),(0,t.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),x("teacher")},className:"px-4 py-2 text-sm rounded-lg font-medium transition-all duration-200 ".concat("teacher"===g?"bg-orange-500 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"\uD83D\uDCDA Maestro"}),(0,t.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),x("parent")},className:"px-4 py-2 text-sm rounded-lg font-medium transition-all duration-200 ".concat("parent"===g?"bg-green-500 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"\uD83D\uDC68‍\uD83D\uDC69‍\uD83D\uDC67‍\uD83D\uDC66 Padre"})]})]}),(0,t.jsxs)("form",{className:"space-y-6",onSubmit:v,children:[f?(0,t.jsx)("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded-lg p-3",children:f}):null,(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium mb-2 text-gray-700",children:"Usuario"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(o,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 size-4 pointer-events-none"}),(0,t.jsx)("input",{type:"text",value:i,onChange:e=>u(e.target.value),onInput:e=>u(e.target.value),placeholder:"admin@empresa.com",className:"w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-sm text-gray-900",required:!0,autoComplete:"username",name:"username",id:"username"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium mb-2 text-gray-700",children:"Contrase\xf1a"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 size-4 pointer-events-none"}),(0,t.jsx)("input",{type:"password",value:c,onChange:e=>m(e.target.value),onInput:e=>m(e.target.value),placeholder:"••••••••",className:"w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-sm text-gray-900",required:!0,autoComplete:"current-password",name:"password",id:"password"})]})]}),(0,t.jsx)("button",{type:"submit",disabled:h||!i.trim()||!c.trim(),className:"w-full px-6 py-3 text-sm font-semibold rounded-lg text-white bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl",children:h?"Ingresando…":"\uD83D\uDE80 Ingresar al Sistema"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"Selecciona tu rol y completa tus credenciales para acceder"})]})]})})]})]})}var c=r(20063);let m="force-dynamic";function h(){var e;let{state:a}=(0,n.A)(),r=(0,c.useRouter)(),[i,o]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{localStorage.removeItem("auth_state_v1")},[]),(0,s.useEffect)(()=>{if(a.isAuthenticated&&i){var e,t,s;(null==(e=a.user)?void 0:e.role)==="admin"?r.push("/dashboard"):(null==(t=a.user)?void 0:t.role)==="teacher"?r.push("/maestros"):(null==(s=a.user)?void 0:s.role)==="parent"&&r.push("/padres")}},[a.isAuthenticated,i,null==(e=a.user)?void 0:e.role,r]),(0,t.jsx)(u,{onLoginSuccess:()=>{o(!0)}})}},35844:(e,a,r)=>{"use strict";r.d(a,{O:()=>l,A:()=>d});var t=r(95155),s=r(12115);let n=[{id:"admin-001",username:"admin",password:"admin123",name:"Carlos Rodr\xedguez",role:"admin",email:"carlos.rodriguez@mastersteps.com",organization:"Mastersteps Central",permissions:["all"]},{id:"admin-002",username:"admin@mastersteps.com",password:"admin2024",name:"Ana Garc\xeda",role:"admin",email:"ana.garcia@mastersteps.com",organization:"Mastersteps Central",permissions:["all"]},{id:"teacher-001",username:"maestra.maria",password:"maria123",name:"Mar\xeda Elena V\xe1squez",role:"teacher",email:"maria.vasquez@iglesia-central.com",organization:"Iglesia Central",permissions:["classes","students","content"]},{id:"teacher-002",username:"teacher",password:"teacher123",name:"Rosa Isabel Morales",role:"teacher",email:"rosa.morales@iglesia-betania.com",organization:"Iglesia Betania",permissions:["classes","students","content"]},{id:"teacher-003",username:"prof.lucia",password:"lucia456",name:"Luc\xeda Fern\xe1ndez",role:"teacher",email:"lucia.fernandez@iglesia-emanuel.com",organization:"Iglesia Emanuel",permissions:["classes","students","content"]},{id:"parent-001",username:"padre.juan",password:"juan123",name:"Juan Carlos Mendoza",role:"parent",email:"juan.mendoza@gmail.com",organization:"Iglesia Central",permissions:["view_child_progress","materials"]},{id:"parent-002",username:"parent",password:"parent123",name:"Carmen L\xf3pez",role:"parent",email:"carmen.lopez@hotmail.com",organization:"Iglesia Nueva Vida",permissions:["view_child_progress","materials"]},{id:"parent-003",username:"mama.sofia",password:"sofia789",name:"Sof\xeda Ram\xedrez",role:"parent",email:"sofia.ramirez@yahoo.com",organization:"Iglesia El Redentor",permissions:["view_child_progress","materials"]}],i="auth_state_v1",o=(0,s.createContext)(void 0);function l(e){let{children:a}=e,[r,l]=(0,s.useState)({user:null,isAuthenticated:!1}),d=(0,s.useCallback)(()=>{try{let e=localStorage.getItem(i);if(e){let a=JSON.parse(e);return l(a),!0}}catch(e){}return!1},[]);(0,s.useEffect)(()=>{try{localStorage.setItem(i,JSON.stringify(r))}catch(e){}},[r]);let u=(0,s.useCallback)(async e=>{let{username:a,password:r,preferredRole:t}=e;if(!a.trim())throw Error("Usuario requerido");if(!r.trim())throw Error("Contrase\xf1a requerida");let s=function(e,a,r){let t=n.find(r=>r.username.toLowerCase()===e.toLowerCase()&&r.password===a);return!t||r&&t.role!==r?null:t}(a.trim(),r.trim(),t);if(!s)if(t)throw Error("Credenciales incorrectas o no tienes permisos de ".concat("admin"===t?"Administrador":"teacher"===t?"Maestro":"Padre"));else throw Error("Usuario o contrase\xf1a incorrectos");l({user:{id:s.id,name:s.name,role:s.role,email:s.email,organization:s.organization},isAuthenticated:!0})},[]),c=(0,s.useCallback)(()=>{l({user:null,isAuthenticated:!1})},[]),m=(0,s.useMemo)(()=>({state:r,login:u,logout:c,restoreSession:d}),[r,u,c,d]);return(0,t.jsx)(o.Provider,{value:m,children:a})}function d(){let e=(0,s.useContext)(o);if(!e)throw Error("useAuth debe usarse dentro de AuthProvider");return e}}},e=>{e.O(0,[780,441,493,358],()=>e(e.s=16026)),_N_E=e.O()}]);