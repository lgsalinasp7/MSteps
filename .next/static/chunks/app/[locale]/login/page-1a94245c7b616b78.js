(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[495],{7330:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p,dynamic:()=>g});var r=a(95155),s=a(12115),o=a(35844),n=a(28720),l=a(25080),i=a(71847);let d=(0,i.A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),c=(0,i.A)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var u=a(15239);function m(e){let{onLoginSuccess:t}=e,{login:a}=(0,o.A)(),i=(0,n.av)();(0,n.FC)();let[m,h]=(0,s.useState)(""),[g,p]=(0,s.useState)(""),[x,f]=(0,s.useState)(!1),[b,v]=(0,s.useState)("admin"),[w,y]=(0,s.useState)(null);async function j(e){if(e.preventDefault(),e.stopPropagation(),!m.trim())return void y(i("usernameRequired"));if(!g.trim())return void y(i("passwordRequired"));if(!x){y(null),f(!0);try{await a({username:m.trim(),password:g.trim(),preferredRole:b}),null==t||t()}catch(e){y(e.message||i("loginError"))}finally{f(!1)}}}return(0,r.jsxs)("div",{className:"min-h-screen w-full text-white flex items-center justify-center px-4 relative overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute inset-0 -z-10",children:(0,r.jsx)(u.default,{src:"/fondo-login.png",alt:"Fondo login",fill:!0,priority:!0,className:"object-cover"})}),(0,r.jsx)("div",{className:"absolute top-4 right-4 z-20",children:(0,r.jsx)(l.G,{})}),(0,r.jsxs)("div",{className:"w-full max-w-lg relative z-10",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("div",{className:"inline-flex items-center justify-center w-32 h-32 rounded-2xl shadow-2xl mb-4",style:{backgroundColor:"#0B317D"},children:(0,r.jsx)(u.default,{src:"/logo.png",alt:"Mastersteps Logo",width:80,height:80,className:"object-contain"})}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Mastersteps"}),(0,r.jsx)("p",{className:"text-blue-100 text-lg",children:i("platformTitle")})]}),(0,r.jsx)("div",{className:"rounded-2xl bg-white/95 backdrop-blur-sm shadow-2xl border border-white/20 overflow-hidden relative z-20",children:(0,r.jsxs)("div",{className:"p-8",children:[(0,r.jsxs)("div",{className:"text-center mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:i("selectRole")}),(0,r.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,r.jsxs)("button",{type:"button",onClick:e=>{e.preventDefault(),v("admin")},className:"px-4 py-2 text-sm rounded-lg font-medium transition-all duration-200 ".concat("admin"===b?"text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"),style:"admin"===b?{backgroundColor:"#0B317D"}:{},children:["\uD83D\uDC51 ",i("admin")]}),(0,r.jsxs)("button",{type:"button",onClick:e=>{e.preventDefault(),v("teacher")},className:"px-4 py-2 text-sm rounded-lg font-medium transition-all duration-200 ".concat("teacher"===b?"text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"),style:"teacher"===b?{backgroundColor:"#FFB33C"}:{},children:["\uD83D\uDCDA ",i("teacher")]}),(0,r.jsxs)("button",{type:"button",onClick:e=>{e.preventDefault(),v("parent")},className:"px-4 py-2 text-sm rounded-lg font-medium transition-all duration-200 ".concat("parent"===b?"text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"),style:"parent"===b?{backgroundColor:"#f04770"}:{},children:["\uD83D\uDC68‍\uD83D\uDC69‍\uD83D\uDC67‍\uD83D\uDC66 ",i("parent")]})]})]}),(0,r.jsxs)("form",{className:"space-y-6",onSubmit:j,children:[w?(0,r.jsx)("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded-lg p-3",children:w}):null,(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium mb-2 text-gray-700",children:i("username")}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(d,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 size-4 pointer-events-none"}),(0,r.jsx)("input",{type:"text",value:m,onChange:e=>h(e.target.value),onInput:e=>h(e.target.value),placeholder:"admin@empresa.com",className:"w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:border-transparent bg-white text-sm text-gray-900",onFocus:e=>{e.target.style.borderColor="#0B317D",e.target.style.boxShadow="0 0 0 2px #0B317D40"},onBlur:e=>{e.target.style.borderColor="#d1d5db",e.target.style.boxShadow="none"},required:!0,autoComplete:"username",name:"username",id:"username"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium mb-2 text-gray-700",children:i("password")}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 size-4 pointer-events-none"}),(0,r.jsx)("input",{type:"password",value:g,onChange:e=>p(e.target.value),onInput:e=>p(e.target.value),placeholder:"••••••••",className:"w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:border-transparent bg-white text-sm text-gray-900",onFocus:e=>{e.target.style.borderColor="#0B317D",e.target.style.boxShadow="0 0 0 2px #0B317D40"},onBlur:e=>{e.target.style.borderColor="#d1d5db",e.target.style.boxShadow="none"},required:!0,autoComplete:"current-password",name:"password",id:"password"})]})]}),(0,r.jsx)("button",{type:"submit",disabled:x||!m.trim()||!g.trim(),className:"w-full px-6 py-3 text-sm font-semibold rounded-lg text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl",style:{backgroundColor:"#0B317D",backgroundImage:"linear-gradient(135deg, #0B317D, #0B317D)"},onMouseEnter:e=>{!x&&m.trim()&&g.trim()&&(e.currentTarget.style.backgroundColor="#083063")},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#0B317D"},children:x?"".concat(i("loginButton"),"..."):"\uD83D\uDE80 ".concat(i("loginButton"))}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 text-center",children:[i("selectRole")," y completa tus credenciales para acceder"]})]})]})})]})]})}var h=a(20063);let g="force-dynamic";function p(){var e;let{state:t}=(0,o.A)(),a=(0,h.useRouter)(),[n,l]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{localStorage.removeItem("auth_state_v1")},[]),(0,s.useEffect)(()=>{if(t.isAuthenticated&&n){var e,r,s;(null==(e=t.user)?void 0:e.role)==="admin"?a.push("/dashboard"):(null==(r=t.user)?void 0:r.role)==="teacher"?a.push("/maestros"):(null==(s=t.user)?void 0:s.role)==="parent"&&a.push("/padres")}},[t.isAuthenticated,n,null==(e=t.user)?void 0:e.role,a]),(0,r.jsx)(m,{onLoginSuccess:()=>{l(!0)}})}},25080:(e,t,a)=>{"use strict";a.d(t,{G:()=>d});var r=a(95155),s=a(12115),o=a(20063),n=a(93791),l=a(39068);let i=[{code:"es",name:"Espa\xf1ol",flag:"\uD83C\uDDEA\uD83C\uDDF8"},{code:"en",name:"English",flag:"\uD83C\uDDFA\uD83C\uDDF8"}];function d(){let[e,t]=(0,s.useState)(!1),a=(0,n.Ym)();(0,o.useRouter)(),(0,o.usePathname)();let d=(0,s.useRef)(null),c=i.find(e=>e.code===a)||i[0];return(0,s.useEffect)(()=>{function e(e){d.current&&!d.current.contains(e.target)&&t(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,r.jsxs)("div",{className:"relative",ref:d,children:[(0,r.jsxs)("button",{onClick:()=>t(!e),className:"flex items-center gap-2 p-2 sm:p-3 rounded-xl hover:bg-white/20 transition-all duration-200 text-white",title:"Cambiar idioma / Change language",children:[(0,r.jsx)(l.A,{className:"size-4 sm:size-5"}),(0,r.jsx)("span",{className:"hidden sm:inline text-sm font-medium",children:c.flag})]}),e&&(0,r.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-gray-900/90 backdrop-blur-md rounded-xl shadow-2xl border border-gray-700/50 overflow-hidden z-50",children:i.map(e=>(0,r.jsxs)("button",{onClick:()=>{var t;return t=e.code,void(document.cookie="locale=".concat(t,"; path=/; max-age=").concat(2592e3),window.location.reload())},className:"w-full flex items-center gap-3 px-4 py-3 text-sm font-medium transition-colors ".concat(e.code===a?"bg-blue-600/20 text-blue-300":"text-gray-200 hover:bg-white/10"),children:[(0,r.jsx)("span",{className:"text-lg",children:e.flag}),(0,r.jsx)("span",{className:"flex-1 text-left",children:e.name}),e.code===a&&(0,r.jsx)("span",{className:"text-blue-400",children:"✓"})]},e.code))})]})}},28720:(e,t,a)=>{"use strict";a.d(t,{FC:()=>o,O4:()=>l,YY:()=>d,av:()=>n,c3:()=>s,wM:()=>i});var r=a(18955);function s(e){return(0,r.c3)(e)}function o(){return(0,r.c3)("common")}function n(){return(0,r.c3)("auth")}function l(){return(0,r.c3)("dashboard")}function i(){return(0,r.c3)("navigation")}function d(){return(0,r.c3)("errors")}},35844:(e,t,a)=>{"use strict";a.d(t,{AuthProvider:()=>i,A:()=>d});var r=a(95155),s=a(12115);let o=[{id:"admin-001",username:"admin",password:"admin123",name:"Carlos Rodr\xedguez",role:"admin",email:"carlos.rodriguez@mastersteps.com",organization:"Mastersteps Central",permissions:["all"]},{id:"admin-002",username:"admin@mastersteps.com",password:"admin2024",name:"Ana Garc\xeda",role:"admin",email:"ana.garcia@mastersteps.com",organization:"Mastersteps Central",permissions:["all"]},{id:"teacher-001",username:"maestra.maria",password:"maria123",name:"Mar\xeda Elena V\xe1squez",role:"teacher",email:"maria.vasquez@iglesia-central.com",organization:"Iglesia Central",permissions:["classes","students","content"]},{id:"teacher-002",username:"teacher",password:"teacher123",name:"Rosa Isabel Morales",role:"teacher",email:"rosa.morales@iglesia-betania.com",organization:"Iglesia Betania",permissions:["classes","students","content"]},{id:"teacher-003",username:"prof.lucia",password:"lucia456",name:"Luc\xeda Fern\xe1ndez",role:"teacher",email:"lucia.fernandez@iglesia-emanuel.com",organization:"Iglesia Emanuel",permissions:["classes","students","content"]},{id:"parent-001",username:"padre.juan",password:"juan123",name:"Juan Carlos Mendoza",role:"parent",email:"juan.mendoza@gmail.com",organization:"Iglesia Central",permissions:["view_child_progress","materials"]},{id:"parent-002",username:"parent",password:"parent123",name:"Carmen L\xf3pez",role:"parent",email:"carmen.lopez@hotmail.com",organization:"Iglesia Nueva Vida",permissions:["view_child_progress","materials"]},{id:"parent-003",username:"mama.sofia",password:"sofia789",name:"Sof\xeda Ram\xedrez",role:"parent",email:"sofia.ramirez@yahoo.com",organization:"Iglesia El Redentor",permissions:["view_child_progress","materials"]}],n="auth_state_v1",l=(0,s.createContext)(void 0);function i(e){let{children:t}=e,[a,i]=(0,s.useState)({user:null,isAuthenticated:!1}),d=(0,s.useCallback)(()=>{try{let e=localStorage.getItem(n);if(e){let t=JSON.parse(e);return i(t),!0}}catch(e){}return!1},[]);(0,s.useEffect)(()=>{try{localStorage.setItem(n,JSON.stringify(a))}catch(e){}},[a]);let c=(0,s.useCallback)(async e=>{let{username:t,password:a,preferredRole:r}=e;if(!t.trim())throw Error("Usuario requerido");if(!a.trim())throw Error("Contrase\xf1a requerida");let s=function(e,t,a){let r=o.find(a=>a.username.toLowerCase()===e.toLowerCase()&&a.password===t);return!r||a&&r.role!==a?null:r}(t.trim(),a.trim(),r);if(!s)if(r)throw Error("Credenciales incorrectas o no tienes permisos de ".concat("admin"===r?"Administrador":"teacher"===r?"Maestro":"Padre"));else throw Error("Usuario o contrase\xf1a incorrectos");i({user:{id:s.id,name:s.name,role:s.role,email:s.email,organization:s.organization},isAuthenticated:!0})},[]),u=(0,s.useCallback)(()=>{i({user:null,isAuthenticated:!1});try{localStorage.removeItem(n),localStorage.removeItem("auth-token")}catch(e){console.warn("Error al limpiar localStorage:",e)}},[]),m=(0,s.useMemo)(()=>({state:a,login:c,logout:u,restoreSession:d}),[a,c,u,d]);return(0,r.jsx)(l.Provider,{value:m,children:t})}function d(){let e=(0,s.useContext)(l);if(!e)throw Error("useAuth debe usarse dentro de AuthProvider");return e}},84708:(e,t,a)=>{Promise.resolve().then(a.bind(a,7330))}},e=>{e.O(0,[791,155,441,255,358],()=>e(e.s=84708)),_N_E=e.O()}]);