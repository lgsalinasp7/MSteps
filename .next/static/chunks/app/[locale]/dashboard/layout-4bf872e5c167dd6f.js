(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[537],{2211:(e,a,r)=>{Promise.resolve().then(r.bind(r,33443))},20063:(e,a,r)=>{"use strict";var t=r(47260);r.o(t,"usePathname")&&r.d(a,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(a,{useRouter:function(){return t.useRouter}})},33443:(e,a,r)=>{"use strict";r.d(a,{RequireRole:()=>o});var t=r(95155),s=r(12115),i=r(35844),n=r(20063);function o(e){var a;let{role:o,children:l}=e,{state:u,restoreSession:m}=(0,i.A)(),c=(0,n.useRouter)(),[d,h]=(0,s.useState)(!0);if((0,s.useEffect)(()=>{if(!u.isAuthenticated&&!m())return void c.replace("/login");h(!1)},[u.isAuthenticated,m,c]),(0,s.useEffect)(()=>{var e;d||u.isAuthenticated&&(null==(e=u.user)?void 0:e.role)===o||c.replace("/login")},[u,c,d,o]),d||!u.isAuthenticated||(null==(a=u.user)?void 0:a.role)!==o){let e=s.lazy(async()=>{switch(o){case"teacher":let{TeacherSkeleton:e}=await Promise.all([r.e(628),r.e(316),r.e(721)]).then(r.bind(r,94721));return{default:e};case"parent":let{ParentSkeleton:a}=await Promise.all([r.e(628),r.e(316),r.e(524)]).then(r.bind(r,3524));return{default:a};default:let{DashboardSkeleton:t}=await Promise.all([r.e(628),r.e(316)]).then(r.bind(r,30316));return{default:t}}});return(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-400 via-blue-300 to-orange-300",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"flex space-x-1 mb-4",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-white rounded-full animate-bounce"}),(0,t.jsx)("div",{className:"w-3 h-3 bg-white rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,t.jsx)("div",{className:"w-3 h-3 bg-white rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),(0,t.jsx)("p",{className:"text-white font-medium",children:"Cargando experiencia educativa..."})]})}),children:(0,t.jsx)(e,{})})}return(0,t.jsx)(t.Fragment,{children:l})}},35844:(e,a,r)=>{"use strict";r.d(a,{AuthProvider:()=>l,A:()=>u});var t=r(95155),s=r(12115);let i=[{id:"admin-001",username:"admin",password:"admin123",name:"Carlos Rodr\xedguez",role:"admin",email:"carlos.rodriguez@mastersteps.com",organization:"Mastersteps Central",permissions:["all"]},{id:"admin-002",username:"admin@mastersteps.com",password:"admin2024",name:"Ana Garc\xeda",role:"admin",email:"ana.garcia@mastersteps.com",organization:"Mastersteps Central",permissions:["all"]},{id:"teacher-001",username:"maestra.maria",password:"maria123",name:"Mar\xeda Elena V\xe1squez",role:"teacher",email:"maria.vasquez@iglesia-central.com",organization:"Iglesia Central",permissions:["classes","students","content"]},{id:"teacher-002",username:"teacher",password:"teacher123",name:"Rosa Isabel Morales",role:"teacher",email:"rosa.morales@iglesia-betania.com",organization:"Iglesia Betania",permissions:["classes","students","content"]},{id:"teacher-003",username:"prof.lucia",password:"lucia456",name:"Luc\xeda Fern\xe1ndez",role:"teacher",email:"lucia.fernandez@iglesia-emanuel.com",organization:"Iglesia Emanuel",permissions:["classes","students","content"]},{id:"parent-001",username:"padre.juan",password:"juan123",name:"Juan Carlos Mendoza",role:"parent",email:"juan.mendoza@gmail.com",organization:"Iglesia Central",permissions:["view_child_progress","materials"]},{id:"parent-002",username:"parent",password:"parent123",name:"Carmen L\xf3pez",role:"parent",email:"carmen.lopez@hotmail.com",organization:"Iglesia Nueva Vida",permissions:["view_child_progress","materials"]},{id:"parent-003",username:"mama.sofia",password:"sofia789",name:"Sof\xeda Ram\xedrez",role:"parent",email:"sofia.ramirez@yahoo.com",organization:"Iglesia El Redentor",permissions:["view_child_progress","materials"]}],n="auth_state_v1",o=(0,s.createContext)(void 0);function l(e){let{children:a}=e,[r,l]=(0,s.useState)({user:null,isAuthenticated:!1}),u=(0,s.useCallback)(()=>{try{let e=localStorage.getItem(n);if(e){let a=JSON.parse(e);return l(a),!0}}catch(e){}return!1},[]);(0,s.useEffect)(()=>{try{localStorage.setItem(n,JSON.stringify(r))}catch(e){}},[r]);let m=(0,s.useCallback)(async e=>{let{username:a,password:r,preferredRole:t}=e;if(!a.trim())throw Error("Usuario requerido");if(!r.trim())throw Error("Contrase\xf1a requerida");let s=function(e,a,r){let t=i.find(r=>r.username.toLowerCase()===e.toLowerCase()&&r.password===a);return!t||r&&t.role!==r?null:t}(a.trim(),r.trim(),t);if(!s)if(t)throw Error("Credenciales incorrectas o no tienes permisos de ".concat("admin"===t?"Administrador":"teacher"===t?"Maestro":"Padre"));else throw Error("Usuario o contrase\xf1a incorrectos");l({user:{id:s.id,name:s.name,role:s.role,email:s.email,organization:s.organization},isAuthenticated:!0})},[]),c=(0,s.useCallback)(()=>{l({user:null,isAuthenticated:!1});try{localStorage.removeItem(n),localStorage.removeItem("auth-token")}catch(e){console.warn("Error al limpiar localStorage:",e)}},[]),d=(0,s.useMemo)(()=>({state:r,login:m,logout:c,restoreSession:u}),[r,m,c,u]);return(0,t.jsx)(o.Provider,{value:d,children:a})}function u(){let e=(0,s.useContext)(o);if(!e)throw Error("useAuth debe usarse dentro de AuthProvider");return e}}},e=>{e.O(0,[441,255,358],()=>e(e.s=2211)),_N_E=e.O()}]);