(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[758],{51256:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>S,dynamic:()=>M});var a=t(95155),r=t(12115),i=t(33443),n=t(35844);async function l(){let e=await fetch("/api/dashboard/stats",{cache:"no-store"});if(!e.ok)throw Error("Error obteniendo estad\xedsticas");return await e.json()}async function o(){let e=await fetch("/api/dashboard/attendance",{cache:"no-store"});if(!e.ok)throw Error("Error obteniendo asistencia");return await e.json()}async function c(){let e=await fetch("/api/dashboard/participation",{cache:"no-store"});if(!e.ok)throw Error("Error obteniendo participaci\xf3n");return await e.json()}var d=t(2628),m=t(91169),x=t(48716),h=t(47937),g=t(15870),u=t(80534),p=t(61654),b=t(16485),f=t(78519),j=t(37586),y=t(86651),v=t(59734),N=t(26991),w=t(84879),k=t(68425),A=t(47734),C=t(73697),E=t(23508),z=t(77568);function D(e){let{data:s,color:t}=e;return(0,a.jsx)(N.u,{width:"100%",height:"100%",children:(0,a.jsxs)(w.Q,{data:s,children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"grad1",x1:"0",x2:"0",y1:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:t,stopOpacity:.6}),(0,a.jsx)("stop",{offset:"100%",stopColor:t,stopOpacity:.05})]})}),(0,a.jsx)(k.d,{stroke:"#eef2f7",vertical:!1}),(0,a.jsx)(A.W,{dataKey:"name",stroke:"#94a3b8"}),(0,a.jsx)(C.h,{stroke:"#94a3b8"}),(0,a.jsx)(E.m,{}),(0,a.jsx)(z.G,{type:"monotone",dataKey:"valor",stroke:t,fill:"url(#grad1)",strokeWidth:2})]})})}var R=t(76736),I=t(28720);let T=()=>{var e;let{state:s}=(0,n.A)(),{loading:i,error:N,stats:w,asistencia:k,participacion:A}=function(){let[e,s]=(0,r.useState)(!0),[t,a]=(0,r.useState)(null),[i,n]=(0,r.useState)([]),[d,m]=(0,r.useState)([]),[x,h]=(0,r.useState)([]);return(0,r.useEffect)(()=>{let e=!1;return async function(){s(!0),a(null);try{let[s,t,a]=await Promise.all([l(),o(),c()]);if(e)return;n(s.stats),m(t.asistencia),h(a.participacion)}catch(s){e||a(s.message)}finally{e||s(!1)}}(),()=>{e=!0}},[]),{loading:e,error:t,stats:i,asistencia:d,participacion:x}}(),C=(0,I.O4)(),E=(0,I.FC)(),z=(0,I.YY)(),T=(0,I.c3)("navigation"),M=(0,I.c3)("filters");if((0,r.useMemo)(()=>{let e={"Ni\xf1os inscritos":m.A,"Iglesias activas":x.A,"Clases esta semana":h.A,"Licencias congregacionales":g.A},s={"Ni\xf1os inscritos":R.wk.primary,"Iglesias activas":R.wk.accent,"Clases esta semana":R.wk.danger,"Licencias congregacionales":R.wk.secondary};return w.map(t=>{var a,r;return{...t,icon:null!=(a=e[t.label])?a:m.A,color:null!=(r=s[t.label])?r:R.wk.primary,trend:"up",change:"+12%"}})},[w]),i){let{DashboardSkeleton:e}=t(30316);return(0,a.jsx)(e,{})}if(N)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-400 via-blue-300 to-orange-300",children:(0,a.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl p-8 shadow-xl border border-red-200 text-center max-w-md",children:[(0,a.jsx)("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:z("generic")}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:z("loadingData")}),(0,a.jsx)("p",{className:"text-sm text-red-600 bg-red-50 p-3 rounded-lg",children:N}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors font-medium",children:z("tryAgain")})]})});let S=[{icon:u.A,label:T("dashboard"),active:!0},{icon:p.A,label:T("materials")},{icon:b.A,label:T("analytics")},{icon:m.A,label:T("users")},{icon:h.A,label:T("reports")},{icon:f.A,label:T("billing")},{icon:g.A,label:T("settings")},{icon:j.A,label:T("aiTools")}],_=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{className:"px-3 sm:px-4 py-2 bg-white border border-gray-200 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-all duration-200 flex items-center gap-2 text-sm",children:[(0,a.jsx)("svg",{className:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,a.jsxs)("span",{className:"hidden sm:inline",children:[E("export")," Reporte"]}),(0,a.jsx)("span",{className:"sm:hidden",children:E("export")})]}),(0,a.jsxs)("button",{className:"px-4 sm:px-6 py-2 sm:py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white font-semibold rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all duration-200 shadow-lg flex items-center gap-2 text-sm",children:[(0,a.jsx)("span",{className:"text-lg",children:"+"}),(0,a.jsxs)("span",{className:"hidden sm:inline",children:["Nueva ",T("schools")]}),(0,a.jsx)("span",{className:"sm:hidden",children:"Nueva"})]})]}),H=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex-1 relative min-w-0",children:[(0,a.jsx)(y.A,{className:"absolute left-3 sm:left-4 top-1/2 transform -translate-y-1/2 text-gray-400 size-4 sm:size-5"}),(0,a.jsx)("input",{type:"text",placeholder:"Buscar iglesias, usuarios, reportes...",className:"w-full pl-10 sm:pl-12 pr-3 sm:pr-4 py-2 sm:py-3 rounded-xl border border-gray-200 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),(0,a.jsxs)("select",{className:"px-3 sm:px-4 py-2 sm:py-3 rounded-xl border border-gray-200 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm min-w-0 flex-shrink-0",children:[(0,a.jsxs)("option",{children:[M("all")," las ",T("schools")]}),(0,a.jsx)("option",{children:M("active")}),(0,a.jsx)("option",{children:M("inactive")}),(0,a.jsx)("option",{children:M("recent")})]}),(0,a.jsxs)("select",{className:"px-3 sm:px-4 py-2 sm:py-3 rounded-xl border border-gray-200 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm min-w-0 flex-shrink-0",children:[(0,a.jsx)("option",{children:M("thisMonth")}),(0,a.jsx)("option",{children:M("lastThreeMonths")}),(0,a.jsx)("option",{children:M("thisYear")}),(0,a.jsx)("option",{children:E("allTime")})]})]});return(0,a.jsxs)(v.f,{sidebarItems:S,title:"".concat(E("welcome"),", ").concat((null==(e=s.user)?void 0:e.name)||C("admin.title")),subtitle:C("admin.title"),headerActions:_,filters:H,children:[(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[{title:C("admin.totalStudents"),value:"2,847",change:"+12%",changeType:"positive",icon:"\uD83D\uDC65",color:"from-blue-500 to-blue-600",description:C("admin.studentsDescription")},{title:C("admin.activeChurches"),value:"45",change:"+3",changeType:"positive",icon:"⛪",color:"from-green-500 to-green-600",description:C("admin.churchesDescription")},{title:C("admin.activeCourses"),value:"128",change:"+8",changeType:"positive",icon:"\uD83D\uDCDA",color:"from-orange-500 to-orange-600",description:C("admin.coursesDescription")},{title:C("admin.teachers"),value:"167",change:"+5%",changeType:"positive",icon:"\uD83C\uDF93",color:"from-purple-500 to-purple-600",description:C("admin.teachersDescription")}].map((e,s)=>(0,a.jsxs)(d.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*s},className:"bg-white rounded-2xl p-4 sm:p-6 shadow-sm border border-gray-200 hover:shadow-lg transition-all duration-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("div",{className:"size-10 sm:size-12 rounded-2xl bg-gradient-to-br ".concat(e.color," flex items-center justify-center text-white text-lg sm:text-xl shadow-md"),children:e.icon}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat("positive"===e.changeType?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:e.change})]}),(0,a.jsx)("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-1",children:e.value}),(0,a.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-900 mb-1 line-clamp-1",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-gray-500 line-clamp-1",children:e.description})]},s))}),(0,a.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-sm border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-base sm:text-lg font-bold text-gray-900",children:"Asistencia Semanal"}),(0,a.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:"Participaci\xf3n de estudiantes"})]}),(0,a.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded-full",children:"\xdaltimos 7 d\xedas"})]}),(0,a.jsx)("div",{className:"h-48 sm:h-64 bg-gradient-to-br from-blue-50 to-orange-50 rounded-xl flex items-center justify-center",children:(0,a.jsx)(D,{data:k,color:R.wk.secondary})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Iglesias M\xe1s Activas"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Ranking por participaci\xf3n"})]}),(0,a.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full",children:"Este mes"})]}),(0,a.jsx)("div",{className:"space-y-4",children:[{name:"Iglesia Central",students:245,growth:"+15%"},{name:"Iglesia El Redentor",students:198,growth:"+8%"},{name:"Iglesia Nueva Vida",students:167,growth:"+12%"},{name:"Iglesia Betania",students:134,growth:"+5%"},{name:"Iglesia Emanuel",students:98,growth:"+18%"}].map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"size-8 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white text-sm font-bold",children:s+1}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[e.students," estudiantes"]})]})]}),(0,a.jsx)("span",{className:"text-xs font-medium text-green-600",children:e.growth})]},s))})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 sm:gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-4 sm:p-6 shadow-sm border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"size-10 rounded-2xl bg-gradient-to-br from-orange-500 to-orange-600 flex items-center justify-center text-white",children:"⚡"}),(0,a.jsx)("h3",{className:"text-base sm:text-lg font-bold text-gray-900",children:"Acciones R\xe1pidas"})]}),(0,a.jsx)("div",{className:"space-y-3",children:[{icon:"⛪",label:"Registrar Nueva Iglesia",color:"from-blue-500 to-blue-600"},{icon:"\uD83D\uDC68‍\uD83C\uDFEB",label:"Aprobar Maestro",color:"from-green-500 to-green-600"},{icon:"\uD83D\uDCCA",label:"Generar Reporte",color:"from-purple-500 to-purple-600"},{icon:"\uD83D\uDCE7",label:"Enviar Comunicado",color:"from-orange-500 to-orange-600"}].map((e,s)=>(0,a.jsxs)("button",{className:"w-full flex items-center gap-3 p-3 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-gray-300 transition-all duration-200 text-left",children:[(0,a.jsx)("div",{className:"size-8 rounded-xl bg-gradient-to-br ".concat(e.color," flex items-center justify-center text-white text-sm"),children:e.icon}),(0,a.jsx)("span",{className:"text-xs sm:text-sm font-medium text-gray-900 line-clamp-2",children:e.label})]},s))})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"size-10 rounded-2xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center text-white",children:"\uD83D\uDD14"}),(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Actividad Reciente"})]}),(0,a.jsx)("div",{className:"space-y-3",children:[{action:"Nueva iglesia registrada",time:"Hace 2 horas",type:"success"},{action:"Maestro Mar\xeda aprobada",time:"Hace 4 horas",type:"info"},{action:"Reporte mensual generado",time:"Hace 6 horas",type:"neutral"},{action:"45 nuevos estudiantes",time:"Ayer",type:"success"}].map((e,s)=>(0,a.jsxs)("div",{className:"flex items-start gap-3 p-2",children:[(0,a.jsx)("div",{className:"size-2 rounded-full mt-2 ".concat("success"===e.type?"bg-green-400":"info"===e.type?"bg-blue-400":"bg-gray-400")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-900",children:e.action}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.time})]})]},s))})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"size-10 rounded-2xl bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center text-white",children:"\uD83D\uDCC8"}),(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Estad\xedsticas"})]}),(0,a.jsx)("div",{className:"space-y-4",children:[{label:"Tasa de Retenci\xf3n",value:"92%",trend:"+3%"},{label:"Satisfacci\xf3n Padres",value:"4.8/5",trend:"+0.2"},{label:"Clases Completadas",value:"1,247",trend:"+18%"},{label:"Horas de Contenido",value:"2,890h",trend:"+25%"}].map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.label}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[e.trend," vs mes anterior"]})]}),(0,a.jsx)("span",{className:"text-lg font-bold text-gray-900",children:e.value})]},s))})]})]})]})},M="force-dynamic";function S(){return(0,a.jsx)(i.RequireRole,{role:"admin",children:(0,a.jsx)(T,{})})}},97529:(e,s,t)=>{Promise.resolve().then(t.bind(t,51256))}},e=>{e.O(0,[628,791,155,619,638,316,40,441,255,358],()=>e(e.s=97529)),_N_E=e.O()}]);