(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{9853:(e,a,r)=>{Promise.resolve().then(r.bind(r,89547))},20063:(e,a,r)=>{"use strict";var s=r(47260);r.o(s,"useRouter")&&r.d(a,{useRouter:function(){return s.useRouter}})},35844:(e,a,r)=>{"use strict";r.d(a,{O:()=>l,A:()=>u});var s=r(95155),t=r(12115);let i=[{id:"admin-001",username:"admin",password:"admin123",name:"Carlos Rodr\xedguez",role:"admin",email:"carlos.rodriguez@mastersteps.com",organization:"Mastersteps Central",permissions:["all"]},{id:"admin-002",username:"admin@mastersteps.com",password:"admin2024",name:"Ana Garc\xeda",role:"admin",email:"ana.garcia@mastersteps.com",organization:"Mastersteps Central",permissions:["all"]},{id:"teacher-001",username:"maestra.maria",password:"maria123",name:"Mar\xeda Elena V\xe1squez",role:"teacher",email:"maria.vasquez@iglesia-central.com",organization:"Iglesia Central",permissions:["classes","students","content"]},{id:"teacher-002",username:"teacher",password:"teacher123",name:"Rosa Isabel Morales",role:"teacher",email:"rosa.morales@iglesia-betania.com",organization:"Iglesia Betania",permissions:["classes","students","content"]},{id:"teacher-003",username:"prof.lucia",password:"lucia456",name:"Luc\xeda Fern\xe1ndez",role:"teacher",email:"lucia.fernandez@iglesia-emanuel.com",organization:"Iglesia Emanuel",permissions:["classes","students","content"]},{id:"parent-001",username:"padre.juan",password:"juan123",name:"Juan Carlos Mendoza",role:"parent",email:"juan.mendoza@gmail.com",organization:"Iglesia Central",permissions:["view_child_progress","materials"]},{id:"parent-002",username:"parent",password:"parent123",name:"Carmen L\xf3pez",role:"parent",email:"carmen.lopez@hotmail.com",organization:"Iglesia Nueva Vida",permissions:["view_child_progress","materials"]},{id:"parent-003",username:"mama.sofia",password:"sofia789",name:"Sof\xeda Ram\xedrez",role:"parent",email:"sofia.ramirez@yahoo.com",organization:"Iglesia El Redentor",permissions:["view_child_progress","materials"]}],n="auth_state_v1",o=(0,t.createContext)(void 0);function l(e){let{children:a}=e,[r,l]=(0,t.useState)({user:null,isAuthenticated:!1}),u=(0,t.useCallback)(()=>{try{let e=localStorage.getItem(n);if(e){let a=JSON.parse(e);return l(a),!0}}catch(e){}return!1},[]);(0,t.useEffect)(()=>{try{localStorage.setItem(n,JSON.stringify(r))}catch(e){}},[r]);let m=(0,t.useCallback)(async e=>{let{username:a,password:r,preferredRole:s}=e;if(!a.trim())throw Error("Usuario requerido");if(!r.trim())throw Error("Contrase\xf1a requerida");let t=function(e,a,r){let s=i.find(r=>r.username.toLowerCase()===e.toLowerCase()&&r.password===a);return!s||r&&s.role!==r?null:s}(a.trim(),r.trim(),s);if(!t)if(s)throw Error("Credenciales incorrectas o no tienes permisos de ".concat("admin"===s?"Administrador":"teacher"===s?"Maestro":"Padre"));else throw Error("Usuario o contrase\xf1a incorrectos");l({user:{id:t.id,name:t.name,role:t.role,email:t.email,organization:t.organization},isAuthenticated:!0})},[]),c=(0,t.useCallback)(()=>{l({user:null,isAuthenticated:!1})},[]),d=(0,t.useMemo)(()=>({state:r,login:m,logout:c,restoreSession:u}),[r,m,c,u]);return(0,s.jsx)(o.Provider,{value:d,children:a})}function u(){let e=(0,t.useContext)(o);if(!e)throw Error("useAuth debe usarse dentro de AuthProvider");return e}},89547:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>o,dynamic:()=>n});var s=r(12115),t=r(35844),i=r(20063);let n="force-dynamic";function o(){let{state:e}=(0,t.A)(),a=(0,i.useRouter)();return(0,s.useEffect)(()=>{var r,s,t;e.isAuthenticated&&(null==(r=e.user)?void 0:r.role)==="admin"?a.push("/dashboard"):e.isAuthenticated&&(null==(s=e.user)?void 0:s.role)==="teacher"?a.push("/maestros"):e.isAuthenticated&&(null==(t=e.user)?void 0:t.role)==="parent"?a.push("/padres"):a.push("/login")},[e,a]),null}}},e=>{e.O(0,[441,493,358],()=>e(e.s=9853)),_N_E=e.O()}]);