(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{3809:(e,a,r)=>{"use strict";r.d(a,{default:()=>i});var s=r(93791),t=r(95155);function i(e){let{locale:a,...r}=e;if(!a)throw Error(void 0);return(0,t.jsx)(s.Dk,{locale:a,...r})}},13673:()=>{},35844:(e,a,r)=>{"use strict";r.d(a,{AuthProvider:()=>l,A:()=>m});var s=r(95155),t=r(12115);let i=[{id:"admin-001",username:"admin",password:"admin123",name:"Carlos Rodr\xedguez",role:"admin",email:"carlos.rodriguez@mastersteps.com",organization:"Mastersteps Central",permissions:["all"]},{id:"admin-002",username:"admin@mastersteps.com",password:"admin2024",name:"Ana Garc\xeda",role:"admin",email:"ana.garcia@mastersteps.com",organization:"Mastersteps Central",permissions:["all"]},{id:"teacher-001",username:"maestra.maria",password:"maria123",name:"Mar\xeda Elena V\xe1squez",role:"teacher",email:"maria.vasquez@iglesia-central.com",organization:"Iglesia Central",permissions:["classes","students","content"]},{id:"teacher-002",username:"teacher",password:"teacher123",name:"Rosa Isabel Morales",role:"teacher",email:"rosa.morales@iglesia-betania.com",organization:"Iglesia Betania",permissions:["classes","students","content"]},{id:"teacher-003",username:"prof.lucia",password:"lucia456",name:"Luc\xeda Fern\xe1ndez",role:"teacher",email:"lucia.fernandez@iglesia-emanuel.com",organization:"Iglesia Emanuel",permissions:["classes","students","content"]},{id:"parent-001",username:"padre.juan",password:"juan123",name:"Juan Carlos Mendoza",role:"parent",email:"juan.mendoza@gmail.com",organization:"Iglesia Central",permissions:["view_child_progress","materials"]},{id:"parent-002",username:"parent",password:"parent123",name:"Carmen L\xf3pez",role:"parent",email:"carmen.lopez@hotmail.com",organization:"Iglesia Nueva Vida",permissions:["view_child_progress","materials"]},{id:"parent-003",username:"mama.sofia",password:"sofia789",name:"Sof\xeda Ram\xedrez",role:"parent",email:"sofia.ramirez@yahoo.com",organization:"Iglesia El Redentor",permissions:["view_child_progress","materials"]}],o="auth_state_v1",n=(0,t.createContext)(void 0);function l(e){let{children:a}=e,[r,l]=(0,t.useState)({user:null,isAuthenticated:!1}),m=(0,t.useCallback)(()=>{try{let e=localStorage.getItem(o);if(e){let a=JSON.parse(e);return l(a),!0}}catch(e){}return!1},[]);(0,t.useEffect)(()=>{try{localStorage.setItem(o,JSON.stringify(r))}catch(e){}},[r]);let c=(0,t.useCallback)(async e=>{let{username:a,password:r,preferredRole:s}=e;if(!a.trim())throw Error("Usuario requerido");if(!r.trim())throw Error("Contrase\xf1a requerida");let t=function(e,a,r){let s=i.find(r=>r.username.toLowerCase()===e.toLowerCase()&&r.password===a);return!s||r&&s.role!==r?null:s}(a.trim(),r.trim(),s);if(!t)if(s)throw Error("Credenciales incorrectas o no tienes permisos de ".concat("admin"===s?"Administrador":"teacher"===s?"Maestro":"Padre"));else throw Error("Usuario o contrase\xf1a incorrectos");l({user:{id:t.id,name:t.name,role:t.role,email:t.email,organization:t.organization},isAuthenticated:!0})},[]),u=(0,t.useCallback)(()=>{l({user:null,isAuthenticated:!1});try{localStorage.removeItem(o),localStorage.removeItem("auth-token")}catch(e){console.warn("Error al limpiar localStorage:",e)}},[]),d=(0,t.useMemo)(()=>({state:r,login:c,logout:u,restoreSession:m}),[r,c,u,m]);return(0,s.jsx)(n.Provider,{value:d,children:a})}function m(){let e=(0,t.useContext)(n);if(!e)throw Error("useAuth debe usarse dentro de AuthProvider");return e}},82565:(e,a,r)=>{Promise.resolve().then(r.bind(r,3809)),Promise.resolve().then(r.t.bind(r,13673,23)),Promise.resolve().then(r.bind(r,35844))}},e=>{e.O(0,[978,791,441,255,358],()=>e(e.s=82565)),_N_E=e.O()}]);